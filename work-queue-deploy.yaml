apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: work-queue
  namespace: user-hao-li
spec:
  components:
    - name: ssh_secret
      type: sealedsecret
        properties:
          data:
            id_rsa: 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
    - name: work-queue
      type: webservice
      properties:
        image: "lihao2000b/xcal:1.0"
        clusters: ["local"]
        namespace: user-hao-li
        cmd: ["bash", "/config/runner.sh"]
        volumeMounts:
          secret:
            name: volume-ssh
            mountPath: "~/.ssh"
            secretName: id_rsa
        ports:
          - port: 8009
            expose: true
      traits:
        - type: scaler
          properties:
            replicas: 1
        - type: storage
          properties:
            configMap:
              - name: config-work-queue
                mountPath: /config
                data:
                  runner.sh: |
                    git clone --branch main https://github.com/lihao2000B/Xcal.git ~/Xcal
                    cd ~/Xcal/work-queue
                    uvicorn main:app --host=0.0.0.0 --port=8009